<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Messages</title>
    <style>
        /* SECURITY SHIELD */
        * {
            margin: 0; padding: 0; box-sizing: border-box;
            -webkit-user-select: none; user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        body {
            background-color: #000000; /* True Black for Dark Mode */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: #ffffff;
        }

        /* Header */
        .header {
            padding: 50px 15px 10px;
            border-bottom: 0.5px solid #262626;
            background: rgba(18, 18, 18, 0.94);
            backdrop-filter: blur(20px);
            position: sticky; top: 0; z-index: 100;
            display: flex; flex-direction: column; align-items: center;
        }

        .avatar {
            width: 42px; height: 42px;
            border-radius: 50%;
            background: #3a3a3c url('adrian.jpg') center/cover;
            margin-bottom: 4px;
        }

        .name { font-size: 11px; color: #ffffff; font-weight: 400; opacity: 0.6; }

        /* Chat Area */
        .chat-container {
            flex: 1;
            padding: 20px 12px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .bubble {
            max-width: 75%;
            padding: 8px 16px;
            border-radius: 18px;
            font-size: 16px;
            line-height: 1.35;
            position: relative;
            margin-bottom: 2px;
            animation: bubbleSlide 0.3s ease-out;
        }

        @keyframes bubbleSlide {
            from { opacity: 0; transform: translateY(10px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .received {
            align-self: flex-start;
            background-color: #262629; /* Dark Mode Gray */
            color: #ffffff;
            border-bottom-left-radius: 4px;
        }

        .sent {
            align-self: flex-end;
            background-color: #007aff; /* iOS Blue */
            color: #ffffff;
            border-bottom-right-radius: 4px;
        }

        /* Typing Indicator */
        .typing {
            align-self: flex-start;
            background-color: #262629;
            padding: 12px 16px;
            border-radius: 18px;
            display: none;
            margin-bottom: 2px;
        }

        .dot {
            display: inline-block;
            width: 6px; height: 6px;
            background: #8e8e93;
            border-radius: 50%;
            margin-right: 3px;
            animation: wave 1.3s linear infinite;
        }

        .dot:nth-child(2) { animation-delay: -1.1s; }
        .dot:nth-child(3) { animation-delay: -0.9s; }

        @keyframes wave {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        /* Choice Box - Adjusted slightly upper */
        .choice-box {
            padding: 10px 15px 60px; /* Reduced top padding to move it up */
            background: #000000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .choice-btn {
            background: #1c1c1e; /* Darker choice buttons */
            color: #0a84ff; /* iOS bright blue for dark mode links */
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            border: 0.5px solid #3a3a3c;
        }

        .choice-btn:active { background: #2c2c2e; }

        /* Gift Attachment Card */
        .gift-card {
            align-self: flex-start;
            width: 220px;
            background: #1c1c1e;
            border: 0.5px solid #3a3a3c;
            border-radius: 14px;
            margin-top: 10px;
            overflow: hidden;
            display: none;
            animation: bubbleSlide 0.5s ease;
        }

        .gift-img { height: 100px; background: #1b5e20; display: flex; align-items: center; justify-content: center; font-size: 40px; }
        .gift-info { padding: 10px; background: #2c2c2e; }
        .gift-info h4 { font-size: 14px; color: #ffffff; }
        .gift-info p { font-size: 12px; color: #8e8e93; }

        #white-out {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: white; opacity: 0; z-index: 1000; pointer-events: none;
            transition: opacity 0.6s ease;
        }
    </style>
</head>
<body>

    <div id="white-out"></div>

    <div class="header">
        <div class="avatar"></div>
        <div class="name">Adrian ></div>
    </div>

    <div class="chat-container" id="chat">
        <div id="typing-indicator" class="typing">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
    </div>
    <div class="choice-box" id="options"></div>

    <script>
        document.addEventListener('contextmenu', e => e.preventDefault());

        const chat = document.getElementById('chat');
        const typing = document.getElementById('typing-indicator');
        const options = document.getElementById('options');
        const flash = document.getElementById('white-out');

        const dialogue = [
            { type: 'msg', side: 'received', text: "Yo! Merry Christmas, Yxzanie! üéâ" },
            { type: 'msg', side: 'received', text: "How's your day going so far?" },
            { 
                type: 'choice', 
                btns: [
                    { text: "Merry Christmas! It's good, just chilling. Hbu?", val: "Merry Christmas! It's good, just chilling. Hbu?" },
                    { text: "Merry Christmas! Pretty busy but fun. What's up?", val: "Merry Christmas! Pretty busy but fun. What's up?" }
                ] 
            },
            { type: 'msg', side: 'received', text: "Same here, just family stuff. But listen..." },
            { type: 'msg', side: 'received', text: "Since I can't give you a physical gift right now, I spent some time coding something for you." },
            { 
                type: 'choice', 
                btns: [
                    { text: "Wait, you coded something? üòÇ", val: "Wait, you coded something? üòÇ" },
                    { text: "Oh? Is it a game or something?", val: "Oh? Is it a game or something?" }
                ] 
            },
            { type: 'msg', side: 'received', text: "Haha not exactly a game. Think of it like a digital scavenger hunt." },
            { type: 'msg', side: 'received', text: "It's stored in a secure package. I'll send it over now." },
            { type: 'msg', side: 'received', text: "Just a warning: once you open it, there's no going back until you finish it. Ready?" },
            { 
                type: 'choice', 
                btns: [
                    { text: "I'm ready! Send it over.", val: "I'm ready! Send it over." },
                    { text: "Let's see what you made. Send it!", val: "Let's see what you made. Send it!" }
                ] 
            },
            { type: 'gift' }
        ];

        let step = 0;

        function run() {
            if (step >= dialogue.length) return;
            const item = dialogue[step];

            if (item.type === 'msg') {
                typing.style.display = 'block';
                chat.appendChild(typing);
                chat.scrollTop = chat.scrollHeight;

                setTimeout(() => {
                    typing.style.display = 'none';
                    const b = document.createElement('div');
                    b.className = `bubble ${item.side}`;
                    b.innerText = item.text;
                    chat.insertBefore(b, typing);
                    chat.scrollTop = chat.scrollHeight;
                    if ("vibrate" in navigator) navigator.vibrate(10);
                    step++;
                    setTimeout(run, 1000);
                }, 1500);
            } else if (item.type === 'choice') {
                options.innerHTML = '';
                item.btns.forEach(b => {
                    const div = document.createElement('div');
                    div.className = 'choice-btn';
                    div.innerText = b.text;
                    div.onclick = () => {
                        const sentB = document.createElement('div');
                        sentB.className = 'bubble sent';
                        sentB.innerText = b.val;
                        chat.insertBefore(sentB, typing);
                        options.innerHTML = '';
                        step++;
                        setTimeout(run, 800);
                    };
                    options.appendChild(div);
                });
            } else if (item.type === 'gift') {
                typing.style.display = 'block';
                chat.appendChild(typing);
                chat.scrollTop = chat.scrollHeight;

                setTimeout(() => {
                    typing.style.display = 'none';
                    const card = document.createElement('div');
                    card.className = 'gift-card';
                    card.style.display = 'block';
                    card.innerHTML = `
                        <div class="gift-img">üéÅ</div>
                        <div class="gift-info">
                            <h4>PROJECT_XMAS.zip</h4>
                            <p>Tap to initialize</p>
                        </div>
                    `;
                    card.onclick = () => {
                        flash.style.opacity = '1';
                        setTimeout(() => {
                            window.location.href = "https://yazu5.github.io/gate/";
                        }, 800);
                    };
                    chat.insertBefore(card, typing);
                    chat.scrollTop = chat.scrollHeight;
                }, 2000);
            }
        }

        setTimeout(run, 1000);
    </script>
</body>
</html>
